<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>나름 shop임</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./main.css" />
  </head>
  <body>
    <div class="black-bg" id="modalLogin">
      <div class="white-bg">
        <h4>로그인하세요</h4>

        <form action="success.html" id="form">
          <div class="my-3">
            <input type="text" class="form-control" id="inputId" />
          </div>
          <div class="my-3">
            <input type="password" class="form-control" id="inputPw" />
          </div>
          <button type="submit" class="btn btn-primary" id="submit">
            전송
          </button>
          <button type="button" class="btn btn-danger" id="close">닫기</button>
        </form>
      </div>
    </div>

    <nav class="navbar navbar-light bg-light">
      <div class="container-fluid">
        <span class="navbar-brand">Apple Shop</span>
        <button type="button" class="badge bg-dark" id="buttonDark">
          Dark 🔄
        </button>
        <button class="navbar-toggler" type="button">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
      <div class="process">
        <span class="process-bar"></span>
      </div>
    </nav>

    <ul class="list-group">
      <li class="list-group-item">An item</li>
      <li class="list-group-item">A second item</li>
      <li class="list-group-item">A third item</li>
      <li class="list-group-item">A fourth item</li>
      <li class="list-group-item">And a fifth one</li>
    </ul>

    <div class="main-bg">
      <h4>Shirts on Sale</h4>
      <button id="login" class="btn btn-danger">로그인</button>

      <div class="alert alert-danger">
        <span>5</span>초 이내 구매시 사은품 증정!
      </div>

      <div class="yak">
        <p>
          이용약관<br />
          Lorem ipsum dolor sit, amet consectetur adipisicing elit. Est, fugiat.
          Praesentium dolorem ipsa neque cumque facilis nobis soluta facere quo
          placeat ea, quidem dignissimos suscipit laudantium excepturi numquam
          consequatur nihil. Quasi repudiandae natus eos architecto. Quibusdam
          aut tempora enim ratione porro dolorum perspiciatis iure minus quidem
          odio, laboriosam possimus itaque adipisci odit quisquam nobis dolores
          cumque modi officia impedit ipsum! Ipsum tempora totam, repudiandae
          iste nobis voluptatum tempore vel temporibus harum excepturi
          laboriosam! Error sapiente nostrum delectus molestiae voluptatem
          officiis corporis perspiciatis vero est suscipit, cum amet dolorem quo
          aliquid. Lorem ipsum dolor sit, amet consectetur adipisicing elit.
          Est, fugiat. Praesentium dolorem ipsa neque cumque facilis nobis
          soluta facere quo placeat ea, quidem dignissimos suscipit laudantium
          excepturi numquam consequatur nihil. Quasi repudiandae natus eos
          architecto. Quibusdam aut tempora enim ratione porro dolorum
          perspiciatis iure minus quidem odio, laboriosam possimus itaque
          adipisci odit quisquam nobis dolores cumque modi officia impedit
          ipsum! Ipsum tempora totam, repudiandae iste nobis voluptatum tempore
          vel temporibus harum excepturi laboriosam! Error sapiente nostrum
          delectus molestiae voluptatem officiis corporis perspiciatis vero est
          suscipit, cum amet dolorem quo aliquid. Lorem ipsum dolor sit, amet
          consectetur adipisicing elit. Est, fugiat. Praesentium dolorem ipsa
          neque cumque facilis nobis soluta facere quo placeat ea, quidem
          dignissimos suscipit laudantium excepturi numquam consequatur nihil.
          Quasi repudiandae natus eos architecto. Quibusdam aut tempora enim
          ratione porro dolorum perspiciatis iure minus quidem odio, laboriosam
          possimus itaque adipisci odit quisquam nobis dolores cumque modi
          officia impedit ipsum! Ipsum tempora totam, repudiandae iste nobis
          voluptatum tempore vel temporibus harum excepturi laboriosam! Error
          sapiente nostrum delectus molestiae voluptatem officiis corporis
          perspiciatis vero est suscipit, cum amet dolorem quo aliquid.
        </p>
      </div>
    </div>

    <script>
      // page processbar
      const pageHeight = document.querySelector("html").scrollHeight;
      const processBar = document.querySelector(".process-bar");
      window.addEventListener("scroll", function () {
        const processValue =
          parseFloat(window.scrollY / (pageHeight - window.innerHeight)) * 100;
        processBar.style.width = `${processValue}%`;
      });

      // 약관 다 읽으면, alert발사
      const yakBox = document.querySelector(".yak");
      const yakBoxHeight = yakBox.offsetHeight;
      const yakBoxScrollHeight = yakBox.scrollHeight;
      yakBox.addEventListener("scroll", function () {
        if (yakBox.scrollTop + yakBoxHeight >= yakBoxScrollHeight) {
          alert("약관 확인 완료!");
        }
      });

      // nav로고 애니메이션
      window.addEventListener("scroll", function () {
        if (window.scrollY > 100) {
          document.querySelector(".navbar").classList.add("scrolled");
        } else {
          document.querySelector(".navbar").classList.remove("scrolled");
        }
      });

      // setTimeout / setInterval / clearInterval
      // x초 후에 함수 실행
      // setTimeout(function(){실행할 코드}, ms후 실행함)
      setTimeout(function () {
        document.querySelector(".alert").style.display = "none";
      }, 5000);

      let num = 5;
      //  x초마다 코드 실행
      var timmer = setInterval(function () {
        num--;
        if (num >= 0) {
          document.querySelector(".alert span").innerText = num;
        } else {
          clearTimeout(timmer);
        }
      }, 1000);

      function darkMode() {
        document
          .querySelector(".navbar")
          .classList.remove("navbar-light", "bg-light");
        document
          .querySelector(".navbar")
          .classList.add("navbar-dark", "bg-dark");

        document.querySelector("#buttonDark").innerText = "Light 🔄";
        document.querySelector("#buttonDark").classList.remove("bg-dark");
        document
          .querySelector("#buttonDark")
          .classList.add("bg-light", "text-secondary");
      }

      function lightMode() {
        document
          .querySelector(".navbar")
          .classList.remove("navbar-dark", "bg-dark");
        document
          .querySelector(".navbar")
          .classList.add("navbar-light", "bg-light");
        document.querySelector("#buttonDark").innerText = "Dark 🔄";
        document
          .querySelector("#buttonDark")
          .classList.remove("bg-light", "text-secondary");
        document.querySelector("#buttonDark").classList.add("bg-dark");
      }

      let buttonClickCnt = 0;
      // 다크모드
      document
        .querySelector("#buttonDark")
        .addEventListener("click", function () {
          if (buttonClickCnt % 2 == 0) {
            darkMode();
          } else {
            lightMode();
          }
          buttonClickCnt++;
        });

      // #유효성 검사

      // 1. 문자 검사하는 가장 쉬운 방법
      // '문자'.includes('찾을단어')

      // 2. 정규표현식(Regular Expression) - 한글이 들어가냐, 영어가 들어가냐, A로 끝나냐.. 등등 검사 가능
      // 정규식 : 문자를 검사할 수 있는 식
      // /검사문/.test('테스트할문자')
      // /abc/.test('abcde') -> 'abcde'에 abc가 들어가냐?

      const form = document.querySelector("#form");
      form.addEventListener("submit", function (e) {
        const inputId = document.querySelector("#inputId");
        const inputPw = document.querySelector("#inputPw");
        if (inputId.value == "") {
          e.preventDefault();
          alert("id를 입력하셈");
        } else if (/\S+@\S+\.\S+/.test(inputId.value) == false) {
          e.preventDefault();
          alert("이메일 형식으로 입력해주세요");
        } else if (inputPw.value == "") {
          e.preventDefault();
          alert("비밀번호를 입력하셈");
        } else if (inputPw.value.length < 6) {
          e.preventDefault();
          alert("비밀번호는 6자 이상으로 설정해주세요");
        } else if (/[A-Z]/.test(inputPw.value) == false) {
          e.preventDefault();
          alert("적어도 하나의 대문자는 입력해주세요");
        }
      });

      document
        .querySelector(".navbar-toggler")
        .addEventListener("click", function () {
          document.querySelector(".list-group").classList.toggle("show");
        });

      document.querySelector("#login").addEventListener("click", function () {
        document.querySelector("#modalLogin").classList.add("show");
      });

      document.querySelector("#close").addEventListener("click", function () {
        document.querySelector("#modalLogin").classList.remove("show");
      });
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
